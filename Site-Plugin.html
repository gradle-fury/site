<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-02-23 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="Date-Creation-yyyymmdd" content="20160101"/>
    <meta name="Date-Revision-yyyymmdd" content="20161020"/>
    <meta http-equiv="Content-Language" content="en"/>
    <title> Gradle Fury</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css"/>
    <link rel="stylesheet" href="./css/site.css"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>

    <link rel="stylesheet" type="text/css" href="./css/bootstrap-sortable.css">


    <script type="text/javascript" src="./js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap-sortable.js"></script>
    <script type="text/javascript" src="./js/moment.min.js"></script>
</head>
<body class="topBarDisabled">

<a href="https://github.com/gradle-fury/gradle-fury">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
    src="./img/forkme_right_gray_6d6d6d.png"
    alt="Fork me on GitHub">
    </a>


<div class="container-fluid">
    <div id="banner">
        <div class="pull-left">
            <div id="bannerLeft">
                <h2> Gradle Fury</h2>
            </div>
        </div>
        <div class="pull-right">
            <div id="bannerRight">
                <!-- override this with your own logo-->
                <img src="./img/logo.png"/>
            </div>
        </div>
        <div class="clear">
            <hr/>
        </div>
    </div>

    <div id="breadcrumbs">
        <ul class="breadcrumb">

            <li class="">
                <a href="https://gradle-fury.github.io/site/" class="externalLink" title="[ gradle-fury ]">
                    [ gradle-fury ]</a>
                <span class="divider">/</span>
            </li>
            <li class="">
                <a href="http://github.com/gradle-fury/gradle-fury" class="externalLink" title="Gradle Fury">
                    Gradle Fury</a>

            </li>

            <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published:
                2016-10-20
            </li>
            <li id="projectVersion" class="pull-right">
                1.1.0
            </li>

        </ul>
    </div>


    <div class="row-fluid">
        <div id="leftColumn" class="span2">
            <div class="well sidebar-nav">


                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>

                    <li  >

                        <a href="index.html"><span class="none"></span>Introduction</a>
                    </li>

                    <!-- user generated menu goes here, basically any additional html or markdown files
                    from src/site are auto linked here-->
                     <li>

                                <a href="Android-Support-Plugin.html" title="Android   Support   Plugin">
                                    <span class="none"></span>
                                    Android   Support   Plugin</a>
                            </li> <li>

                                <a href="Bootstrap-Plugin.html" title="Bootstrap   Plugin">
                                    <span class="none"></span>
                                    Bootstrap   Plugin</a>
                            </li> <li>

                                <a href="Encryption-Plugin.html" title="Encryption   Plugin">
                                    <span class="none"></span>
                                    Encryption   Plugin</a>
                            </li> <li>

                                <a href="FAQ.html" title="FAQ">
                                    <span class="none"></span>
                                    FAQ</a>
                            </li> <li>

                                <a href="Home.html" title="Home">
                                    <span class="none"></span>
                                    Home</a>
                            </li> <li>

                                <a href="Quality-Plugin.html" title="Quality   Plugin">
                                    <span class="none"></span>
                                    Quality   Plugin</a>
                            </li> <li>

                                <a href="Release-Procedure.html" title="Release   Procedure">
                                    <span class="none"></span>
                                    Release   Procedure</a>
                            </li> <li>

                                <a href="sampleAsciidoc.html" title="Sample Asciidoc">
                                    <span class="none"></span>
                                    Sample Asciidoc</a>
                            </li> <li>

                                <a href="sampleHtml.html" title="Sample Html">
                                    <span class="none"></span>
                                    Sample Html</a>
                            </li> <li>

                                <a href="sampleMarkdown.html" title="Sample Markdown">
                                    <span class="none"></span>
                                    Sample Markdown</a>
                            </li> <li>

                                <a href="Site-Plugin.html" title="Site   Plugin">
                                    <span class="none"></span>
                                    Site   Plugin</a>
                            </li> <li>

                                <a href="The-Maven-Support-plugin.html" title="The   Maven   Support   plugin">
                                    <span class="none"></span>
                                    The   Maven   Support   plugin</a>
                            </li> <li>

                                <a href="wiki.html" title="Wiki">
                                    <span class="none"></span>
                                    Wiki</a>
                            </li>

                    <li class="nav-header">Project Documentation</li>

                    <li>

                        <a href="project-info.html" title="Project Information">
                            <span class="icon-chevron-down"></span>
                            Project Information</a>
                        <ul class="nav nav-list">

                            <li>

                                <a href="team-list.html" title="Project Team">
                                    <span class="none"></span>
                                    Project Team</a>
                            </li>

                            <li>

                                <a href="https://github.com/gradle-fury/gradle-fury.git" title="Source Repository">
                                    <span class="none"></span>
                                    Source Repository</a>
                            </li>

                            <li>

                                <a href="https://github.com/gradle-fury/gradle-fury/issues" title="Issue Tracking">
                                    <span class="none"></span>
                                    Issue Tracking</a>
                            </li>
                            <li>

                                <a href="project-license.html" title="Project License">
                                    <span class="none"></span>
                                    Project License</a>
                            </li>

                            <li>

                                <a href="dependency-repos.html" title="Dependency Repositories">
                                    <span class="none"></span>
                                    Dependency Repositories</a>
                            </li>


                            <li>

                                <a href="dependencyReport.html" title="Dependency Convergence">
                                    <span class="none"></span>
                                    Dependency Convergence</a>
                            </li>

<!-- maybe in the future
                            <li>

                                <a href="mail-lists.html" title="Mailing Lists">
                                    <span class="none"></span>
                                    Mailing Lists</a>
                            </li>

                            <li>

                                <a href="dependency-management.html" title="Dependency Management">
                                    <span class="none"></span>
                                    Dependency Management</a>
                            </li>


-->
                            <li>

                                <a href="https://travis-ci.org/gradle-fury/gradle-fury" title="Continuous Integration">
                                    <span class="none"></span>
                                    Continuous Integration</a>
                            </li>
<!--
                            <li>

                                <a href="plugins.html" title="Project Plugins">
                                    <span class="none"></span>
                                    Project Plugins</a>
                            </li>
-->
                            <li>

                                <a href="https://github.com/gradle-fury/gradle-fury/releases"
                                   title="Distribution Management">
                                    <span class="none"></span>
                                    Distribution Management</a>
                            </li>
                            <li>

                                <a href="javadoc.html" title="Project Javadocs">
                                    <span class="none"></span>
                                    Javadocs</a>

                            </li>
                            <li>

                                <a href="javadocAll/index.html" title="Project Javadocs">
                                    <span class="none"></span>
                                    Javadocs Aggregated</a>

                            </li>

                            <li>

                                <a href="reports.html" title="Project Reports">
                                    <span class="none"></span>
                                    Project Reports</a>

                            </li>

                        </ul>
                    </li>


                </ul>


                <hr/>


            </div>
        </div>


        <div id="bodyColumn" class="span10">
            <a name="topOfPage"></a>
            <h1>The Site Plugin</h1>
<p>Remember the Maven site plugin? The one that used to look like <a href="https://whatiscomingtomyhead.files.wordpress.com/2011/06/mavensite.png">this</a> but now looks nice like <a href="https://maven.apache.org/plugins/maven-site-plugin/">this</a>?</p>
<p>Yeah I do too, and I miss it. Gradle really doesn't provide anything like this. Good news! There are so many people that attempted it. Bad news! Most of them failed attempts and are dead and abandoned.</p>
<p>So I took a stab at it and borrowed from some of the half working projects and heavily from maven, bootstrap, the work of others, bookies, loan sharks, thieves and the Elders of Canterbury, simplifying things where ever possible.</p>
<p>Well it's not exactly the Maven Site Plugin, but it's our version of it. It's pretty darn close.
It uses theming inspired by <a href="http://maven.apache.org/skins/maven-fluido-skin/">Apache Fluido</a> and is loosely based on the work Paul Speed-2 @ filament did over <a href="https://sourceforge.net/p/filament/code/HEAD/tree/trunk/site/build.gradle">here</a>.</p>
<p>Instead of the APT based sites, we opted for a simpler solution, a singular page template
which is then merged with generated content and your content using Markdown and the
<a href="https://github.com/atlassian/commonmark-java">Common Mark</a> renderer. We also
looked at <a href="https://github.com/sirthias/pegdown">Pegdown</a> but ran into performance issues.
<a href="https://github.com/asciidoctor/asciidoctorj">Asciidoc</a>/docbook</p>
<h1>Design</h1>
<p>The Site Plugin (and sorry for stealing, I mean borrowing, err.. leveraging the name) uses a basic template file to produce the majority of the content. The template is then populated by a number of environment variables, the gradle.properties file, the dynamic menu generation, and finally, the content.</p>
<p>The content comes from internally generated content that is generally useful to developers (all the good old Project Information stuff that Maven's plugin does), and from the stuff you provide in the form of Markdown or Asciidoc.</p>
<h1>Using the Site Plugin</h1>
<p>Note: as of 1.0.14 this isn't necessary. The site plugin will auto download what you need. But if you're disconnected from the internet on the first run, it will probably fail. In which case, you should follow this procedure or clone gradle fury and host it in your environment.</p>
<p>1 .In the root of your project make the following directory structure</p>
<pre><code>src
src/site
src/site/index.md
</code></pre>
<p>2 .Next you'll want to grab all the junk that's in Gradle-Fury's <code>src/site</code> folder. You really just need the <code>img</code>,<code>css</code>, and <code>js</code> folders.</p>
<ol start="3">
<li>Make a <code>index.md</code></li>
</ol>
<p>It is required! This is your splash page for your project. Make a good first impression!
<strong>Note:</strong> if you're looking for gradle-fury's index.md page, you won't find it. Instead, we copy this readme.md to the right place and rename it.
4. In your root <code>build.gradle</code> adding the following</p>
<p><code>apply from 'https://raw.githubusercontent.com/gradle-fury/gradle-fury/master/gradle/site.gradle'</code></p>
<ol start="5">
<li>
<p>Build your project normally. We suggest running all possible tasks that generate reports, such as <code>connectedCheck</code> or if you are you using the <a href="Quality-Plugin">Quality Plugin</a> just call <code>build</code>.</p>
</li>
<li>
<p>Build the site with <code>gradlew site</code>. The output normally goes to <code>root/build/site</code>. The output location can be overridden by putting this in the root build.gradle file</p>
</li>
</ol>
<p><code>ext.buildWebsiteDir = rootDir.absolutePath + &quot;/docs/&quot;</code></p>
<h2>Dependencies</h2>
<p>The Site plugin only requires that you have a <code>gradle.properties</code> present and populated with the pom settings. These are used to generate a number of the pages, such as licenses, name, description, urls, issue trackers, etc</p>
<h2>Adding custom content</h2>
<p>Simply place any custom HTML, Markdown, Asciidoc or PDF docs in the <code>src/site</code> and they will be included in the site build and linked in the left hand side nav menu.</p>
<p>Gradle-Fury's site's plugin can also use Github styled Markdown and Asciidoc formatted docs. These docs are rendered down to HTML and injected into the same template as the rest of the site.</p>
<p>Most Github flavored markdown tags are supported. You can also any files put in <code>src/site/</code> will
be included in the site. Any html or pdf files in the root <code>src/site/</code> will be auto-linked on the left hand site
navigation menu. We also have some magic to resolve relative links from markdown to markdown pages, but only if the article link doesn't have any spaces in it.</p>
<h2>Changing the site logo</h2>
<p>Replace the <code>img/logo.png</code> with whatever you want.</p>
<h2>Customizing the site</h2>
<p>Well, you have direct access to modify the template. Do whatever you want!</p>
<h1>What's missing?</h1>
<ul>
<li>Breadcrumbs</li>
<li>Per module site configurations (right now, it's just a composite for the whole project)</li>
<li>No deployment tasks</li>
<li>Many of the pages the Maven Site Plugin generates can be reduced to just a link. For instance, the location of the source (do we really need an entire web page that only shows the link to the source code?). Same goes for CI, distro management and issue tracking.</li>
</ul>
<h1>What libraries are we using?</h1>
<ul>
<li>jQuery - <a href="https://jquery.com/">https://jquery.com/</a></li>
<li>Twitter's Bootstrap - <a href="http://getbootstrap.com/2.3.2/">http://getbootstrap.com/2.3.2/</a></li>
<li>Bootstrap Sortable - <a href="https://github.com/drvic10k/bootstrap-sortable">https://github.com/drvic10k/bootstrap-sortable</a></li>
<li>Apache Fluido - original site</li>
<li>Based on Paul Speed @ filament <a href="https://sourceforge.net/p/filament/code/HEAD/tree/trunk/site/build.gradle">https://sourceforge.net/p/filament/code/HEAD/tree/trunk/site/build.gradle</a></li>
</ul>
<h1>How do we build the gradle-fury site?</h1>
<pre><code class="language-bash">./gradlew install -Pprofile=ci
# if needed, for distribution projects
./gradlew distZip -Pprofile=ci
# if needed, for on device android test and reports
./gradlew cC
# finally, generate the site
./gradlew site -Pprofile=ci
</code></pre>
<p>The output goes to <code>rootDir/build/site/</code></p>
<h1>What is generated by the site plugin?</h1>
<p>Here's a quick list</p>
<ul>
<li>Project Summary, all of the artifacts of your project, derived from the project itself and gradle.properties</li>
<li>Project Team, from gradle.properties</li>
<li>Links to the source, issue tracker, CI and distribution pages</li>
<li>All javadocs are included and linked</li>
<li>Project repository list, from gradle.properties</li>
<li>Dependency report - for all the artifacts of your project, derived from the project itself</li>
<li>Project reports - for all artifacts of the project, any and all things from the build/reports folder is included and linked (see the quality plugin). Includes test reports, connectedCheck, Findbugs, PMD, etc</li>
<li>Converts and themes all your .md and .asciidoc files from the root/src/site and links them in</li>
</ul>
<h2>Notes of a madman</h2>
<p>If you're really bored, continue to the next section. This bit is all about what I found difficult with this task.</p>
<p>Task order is a challenge - figuring out in what order to scan for stuff, generate content and populate content was tricky to get right. I finally ended up with a working solution that performs the following</p>
<ol>
<li>Copy and record the Javadocs - this part is tricky with build variants and product flavors</li>
<li>Copy and record the Reports - this part was super hard, but gradle is dumb</li>
<li>Copy user content and templates - just a copy task</li>
<li>Generate then Navigation Menu - builds the left hand side nav menu</li>
<li>Prepare Template - prepares the template with all environment variables replaced, including the menu</li>
<li>GenerateCannedContent - this builds all of the stuff maven usually does for you, in markdown</li>
<li>Convert Content - converts all markdown and ascii doc stuff into html and removes the sources from the build directory, using the template.</li>
</ol>
<p>Regarding the dumb part, gradle as 0 governance on build reports. As such, I had to write a lot of stupid fragile code that's plugin specific and java vs android specific, and android normal vs android with flavors/variants. The folder structures are inconsistent and there's no naming conventions for anything. I hate it.</p>
<h1>Using the Dependency Converage report to sync for offline building</h1>
<p>This part has to be done with Maven since gradle's caches are not portable.</p>
<p>Make a <code>pom.xml</code> and then copy and paste the maven composite dependency data in that the site generates. Then run maven
<code>mvn dependency:go-offline dependency:sources dependency:resolve -Dclassifier=javadoc</code></p>
<p>It may fail for android specific libraries that are included with the SDK. Manually remove those dependencies from the pom and retry until you get everything.</p>


        </div>
        <div id="iframenav" style="visibility:hidden">
        <center><h3><a name="iframeAnchor"></a><a href="#topOfPage"> -- Top --</a></h3>
            <a href="javascript:popout();">Load in a new window</a>
        </center>
        </div>

        <iframe id="frame1" width="100%" height="75%" style="display:none"></iframe>



    </div>
</div>

<hr/>

<footer>
    <div class="container-fluid">
        <div class="row-fluid">
            <!-- footer -->
        </div>


    </div>
</footer>

<div class="modal hide fade" id="modal1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Artifact Details</h3>
    </div>
    <div class="modal-body">
        <h3>Gradle</h3>
        <pre id="gradleDep">

        </pre>
        <h3>Maven</h3>
        <pre id="mavenDep">

        </pre>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" >Close</a>
    </div>
</div>

<script type="text/javascript">

/**
*    opens the current iframe url in a new window or tab
*/
function popout(){
    var destination = $("#frame1").attr('src');
    var win = window.open(destination, '_blank');
    win.focus();
}

/**
*    displays a report and shows the iframe
*/
function showReport(url){
    $("#iframenav").css('visibility','');
    $("#frame1").show();
    $("#frame1").attr('src', url);
    $("#frame1").attr('height', window.innerHeight);
    window.location.assign("#iframeAnchor");
}

/**
* shows our maven/gradle helper modal
type is the file extension
*/
function showModal(group, artifact, version,type, classifier){

/**
if classifier and types
    foreach classifier
        foreach types
else if classifier
    foreach classifier
else if type
    foreah type
else
    just output it
*/
    //string outputs
    var maventxt ="";
    var gradle="";

    var hasClassifiers = classifier !== "" && classifier !== undefined;
    var hasTypes = type !== "" && type !== undefined;

    if (hasClassifiers && hasTypes){
        type = type.trim();
        var types = type.split(" ");
        classifier = classifier.trim();
        var classifiers = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            for (var k = 0; k < classifiers.length; k++) {
                if (classifiers[k].trim().length==0)
                    continue;
                maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                    "</artifactId>\n\t";
                maventxt += "<type>" + types[i].trim() + "</type>\n\t";
                maventxt += "<classifier>" + classifiers[k].trim() + "</classifier>\n\t";
                maventxt +="<version>" + version + "</version>\n</dependency>\n";

                gradle += "compile '" + group + ":" + artifact + ":" + version;
                gradle += ":" + classifiers[k].trim();
                gradle += "@" + types[i];
                gradle += "'\n";
            }

        }


    } else if (hasClassifiers) {
        classifier = classifier.trim();
        var types = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<classifier>" + types[i].trim() + "</classifier>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += ":" + types[i];
            gradle += "'\n";

        }
    } else if (hasTypes) {
        type = type.trim();
        var types = type.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<type>" + types[i].trim() + "</type>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += "@" + types[i];
            gradle += "'\n";

        }
    } else {
            //no type or classifiers
         maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
         maventxt +="<version>" + version + "</version>\n</dependency>\n";
         gradle += "compile '" + group + ":" + artifact + ":" + version;
         gradle += "'\n";

    }

    $("#mavenDep").text(maventxt);
    $("#gradleDep").text(gradle);
    $('#modal1').modal()

}

$("table").addClass("table table-striped sortable");
$(function () {
    setNavigation();
});


/**
* this sets the "active" bit on the left hand side naviation menu
*/
function setNavigation() {
    var path = window.location.pathname;
    path = path.replace(/\/$/, "");
    path = decodeURIComponent(path);
    var idx=path.toString().lastIndexOf("/");
    if (idx >= 0)
        path=path.substring(idx+1, path.length);

    $(".nav a").each(function () {
        var href = $(this).attr('href');
        if (path.substring(0, href.length) === href) {
            $(this).closest('li').addClass('active');
        }
    });
}
</script>
</body>
</html>
